<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Registro de comidas ‚Äì Mam√°</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      background: #f6f7f9;
      margin: 0;
      color: #222;
    }
    header {
      background: #ffffff;
      padding: 18px;
      font-size: 24px;
      font-weight: 700;
      text-align: center;
      border-bottom: 1px solid #ddd;
    }
    .container {
      max-width: 720px;
      margin: auto;
      padding: 16px;
    }
    .card {
      background: #ffffff;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin-top: 14px;
      margin-bottom: 6px;
      font-size: 16px;
      font-weight: 700;
    }
    input, textarea, select, button {
      width: 100%;
      padding: 14px;
      font-size: 18px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
    textarea { resize: vertical; min-height: 90px; }
    button {
      margin-top: 16px;
      background: #0a66c2;
      color: #fff;
      font-weight: 700;
      border: none;
      cursor: pointer;
    }
    .meal {
      margin-top: 16px;
      padding: 14px;
      border: 1px solid #ddd;
      border-radius: 12px;
      background: #fafafa;
    }
    .secondary { background:#999; }
    .ok { color: green; font-weight:700; margin-top:10px; }
  </style>
</head>
<body>

<header>Registro de comidas ‚Äì Mam√°</header>

<div class="container">
  <div class="card">

    <label>üìÖ Fecha</label>
    <input type="date" id="fecha" />

    <h3 style="margin-top:20px">üçΩÔ∏è Comidas del d√≠a</h3>
    <div id="meals"></div>

    <button type="button" onclick="addMeal()">‚ûï A√±adir comida</button>

    <label>üöª Ba√±o (general del d√≠a)</label>
    <select id="bano">
      <option value="Normal">Normal</option>
      <option value="Diarrea">Diarrea</option>
      <option value="Estre√±imiento">Estre√±imiento</option>
    </select>

    <label>üíß Agua total (ml)</label>
    <input id="agua" type="number" placeholder="Ej. 1500" />

    <label>üßÉ Suero</label>
    <input id="suero" placeholder="No / S√≠ / Cantidad" />

    <button type="button" onclick="guardarEnSheets()">üíæ Guardar en Google Sheets</button>
    <div id="status"></div>

  </div>
</div>

<script>
// üëâ PON AQU√ç TU URL DE APPS SCRIPT
theUrl = "https://script.google.com/macros/s/AKfycbytqtNFOEgFEIubxr30-Q8qs77xFNLFaH8ZlF7e5iixI3MOyaCKvrmXxkz1MrtekjR8/exec";

function todayISO() {
  const d = new Date();
  return d.toISOString().split('T')[0];
}

document.getElementById('fecha').value = todayISO();

let mealIndex = 0;

function addMeal() {
  const container = document.getElementById('meals');
  const div = document.createElement('div');
  div.className = 'meal';
  div.innerHTML = `
    <label>Hora</label>
    <input type="time" id="hora_${mealIndex}" />

    <label>Tipo de comida</label>
    <select id="tipo_${mealIndex}">
      <option value="Desayuno">Desayuno</option>
      <option value="Comida">Comida</option>
      <option value="Cena">Cena</option>
      <option value="Otro">Otro</option>
    </select>

    <label>Alimentos</label>
    <textarea id="alimentos_${mealIndex}"></textarea>

    <label>Cantidad</label>
    <select id="cantidad_${mealIndex}">
      <option value="Poca">Poca</option>
      <option value="Normal">Normal</option>
      <option value="Mucha">Mucha</option>
    </select>
  `;
  container.appendChild(div);
  mealIndex++;
}

function guardarEnSheets() {
  const fecha = document.getElementById('fecha').value;
  const bano = document.getElementById('bano').value;
  const agua = document.getElementById('agua').value;
  const suero = document.getElementById('suero').value;

  if (mealIndex === 0) {
    alert('A√±ade al menos una comida');
    return;
  }

  const payload = [];

  for (let i = 0; i < mealIndex; i++) {
    payload.push({
      fecha,
      hora: document.getElementById(`hora_${i}`).value,
      tipoComida: document.getElementById(`tipo_${i}`).value,
      alimentos: document.getElementById(`alimentos_${i}`).value,
      cantidad: document.getElementById(`cantidad_${i}`).value,
      bano,
      agua,
      suero
    });
  }

  fetch(theUrl, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(payload)
  })
  .then(r => r.text())
  .then(() => {
    document.getElementById('status').innerHTML = '<div class="ok">‚úî Guardado correctamente</div>';
  })
  .catch(() => {
    alert('Error al guardar');
  });
}
</script>

</body>
</html>
